tasks.register('ensureDistDir', ) {
    doLast {
        mkdir layout.buildDirectory.dir('dist')
    }
}

tasks.jpackage {
    dependsOn tasks.dist, tasks.ensureDistDir

    input = "$buildDir/libs"
    destination = "$buildDir/dist"

    appName = project.appName
    appVersion = project.version.toString()
    vendor = 'uqam.ca'

    mainJar = tasks.dist.archiveFileName.get()
    mainClass = project.mainClassName

    linux {
        linuxShortcut = true
    }

    windows {
        winMenu = true
        winDirChooser = true
        winShortcut = true
    }
}