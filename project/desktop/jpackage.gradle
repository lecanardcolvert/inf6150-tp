tasks.register('copyDependencies', Copy) {
    from(configurations.runtimeClasspath)
    into("$buildDir/jpackage/jar")
}

tasks.register('copyJar', Copy) {
    from(tasks.jar)
    into("$buildDir/jpackage/jar")
}

tasks.jpackage {
    dependsOn('dist', 'copyDependencies', 'copyJar')

    input = "$buildDir/jpackage/jar"
    destination = "$buildDir/dist"

    appName = project.name
    appVersion = project.version.toString()
    vendor = 'uqam.ca'

    mainJar = tasks.dist.archiveFileName.get()
    mainClass = project.mainClassName

    linux {
        linuxShortcut = true
    }

    windows {
        winMenu = true
        winDirChooser = true
        winShortcut = true
    }
}